<!DOCTYPE html>
<html>
    <head>
        <title>CITA:CHAT</title>
        <!-- CSS -->
        <link rel="stylesheet" href="./CSS/ChatCreateStyle.css">
        <!-- MetaViewPoint -->
        <meta name="viewport" content="width=375,initial-scale=1,user-scalable=no,minimum-scale=1,maximum-scale=1">
        <!-- googleFont -->
        <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
        <!-- firebaseSetting -->
        <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-firestore.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-storage.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
        <script type="text/javascript" src="./scripts/chat.js"></script>

    </head>
    <body>
        <!-- HeaderMenu -->
        <div id="header">
            <ul>
                 <!-- Logo -->
                 <li class="headerLogo" onClick ="location.href='./chatindex.html'">
                     CITA
                 </li>
                 <!-- ChangeBtn -->
                 <li class="headerBtn">
                     <span onclick="location.href='index.html'" class="material-symbols-outlined" id="iconChangeState">
                         wifi_protected_setup
                     </span>
                 </li>
                 <!-- Search -->
                 <li class="headerSearch">
                 </li>
                 <!-- UserProfile -->
                 <li class="headerProfile">
                     <div class="headerProfileImg">
                         <img class="userProfileImg" id="userProfile" src="https://cdn.pixabay.com/photo/2017/11/06/13/45/cap-2923682_960_720.jpg">
                     </div>
                 </li>
            </ul>
         </div>
        <!-- Content -->
        <div id="content">
            <!-- chatType -->
                <details>
                    <summary>
                        <span class="material-symbols-outlined">
                            sports_basketball
                        </span>
                    </summary>
                    <div class="typeList">
                    <ul>
                        <li>
                            <button type="button" class="colorSet value" id="sports">
                                <span class="material-symbols-outlined">
                                    sports_basketball
                                </span>
                            </button>
                        </li>
                        <li>
                            <button type="button" class="colorSet value" id="sms">
                                <span class="material-symbols-outlined">
                                    sms
                                </span>
                            </button>
                        </li>
                        <li>
                            <button type="button" class="colorSet value" id="restaurant">
                                <span class="material-symbols-outlined">
                                    restaurant
                                </span>
                            </button>
                        </li>
                        <li>
                            <button type="button" class="colorSet value" id="story">
                                <span class="material-symbols-outlined">
                                    auto_stories
                                </span>
                            </button>
                        </li>
                    </ul>
                    </div>
                </details>
            <!-- ChatCreateContent -->
            <div class="chatCreateContent">
                <div id="back" class="chatCreateCard">
                    <ul>
                        <li class="chatRoomImage">
                            <img class="cRI" src="https://image.cine21.com/resize/cine21/still/2019/0213/14_38_39__5c63ad5fdbf9b[X252,310].jpg">
                        </li>
                        <li class="chatTitleinput">
                            <input id="ment" class="inputTitle" type="text" maxlength='12'>
                        </li>
                        <li class="chatDescinput">
                            <input id="intro" class="inputDesc" type="text" maxlength='12'>
                        </li>
                        <li>
                            <button type="button" id="submit" class="chatCreateButton">채팅방 만들기</button>
                            <input type="hidden" id="color"> 

                        </li>
                    </ul>
                </div>
                <!-- ChatColor -->
                <div class="chatSetting">
                    <div class="listArea">
                        <ul>
                            <li>
                                <button type="button" class="colorSet" id="button" onclick ="select1()" style="background-image: linear-gradient(to right, #fa709a 0%, #fee140 100%);"></button>
                            </li>
                            <li>
                                <button type="button" class="colorSet" id="button" onclick ="select2()" style="background-image: linear-gradient(to top, #5ee7df 0%, #b490ca 100%);"></button>
                            </li>
                            <li>
                                <button type="button" class="colorSet" id="button" onclick ="select3()" style="background-image: linear-gradient(to top, #5fa919 0%, #802eb3 100%);"></button>
                            </li>
                            <li>
                                <button type="button" class="colorSet" id="button" onclick ="select4()" style="background-image: linear-gradient(to top, #c8a1bd 0%, #0fd4309c 100%);"></button>
                            </li>
                            <li>
                                <button type="button" class="colorSet" id="button" onclick ="select5()" style="background-image: linear-gradient(to top, #c3e23be3 0%, #0a7256 100%);"></button>
                            </li>
                            <li>
                                <button type="button" class="colorSet" id="button" onclick ="select6()" style="background-image: linear-gradient(to top, #590969 0%, #d1e8d8 100%);"></button>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </body>
    <script>
        // FIREBASE CONFIG    
            const firebaseConfig = {
                apiKey: "AIzaSyDAviFAwj0F60qzBjhGymUL-hzpErarvl8",
                authDomain: "cita-a057c.firebaseapp.com",
                databaseURL: "https://cita-a057c-default-rtdb.asia-southeast1.firebasedatabase.app",
                projectId: "cita-a057c",
                storageBucket: "cita-a057c.appspot.com",
                messagingSenderId: "583943011318",
                appId: "1:583943011318:web:98f9864c4557a420fc25d7",
                measurementId: "G-35W2MMH9S8"
            };
            firebase.initializeApp(firebaseConfig);
    </script>

    <script>
 const db = firebase.firestore();
    const storage = firebase.storage();
    // 로그인
        firebase.auth().onAuthStateChanged((user)=> {
        // login 있으면
        if (user) {
        var cat = $(this).attr("id");
    $('.value').click(function() {
        if (cat != null) {
            cat = null;
        }
        cat = $(this).attr("id");
        console.log(cat);
    })
    $('#submit').click(function(){
      var save = { 
      ment : $('#ment').val(),
      intro : $('#intro').val(),
      usr : user.displayName,
      color : $('#color').val(),
      category : cat
    }
    db.collection('chat').add(save).then((result)=>{
      alert('채팅방을 개설했습니다')
      window.location.href = '/chatindex.html';

      console.log(save);
  })
});
        }
    })

    </script>
</html>